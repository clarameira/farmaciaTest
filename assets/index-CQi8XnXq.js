(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const d=[{id:"p1",nome:"Alprazolam",preco:12.5,estoque:3,validade:"2026-05-01"},{id:"p2",nome:"Vitamina C 500mg",preco:29.9,estoque:0,validade:"2024-01-01"},{id:"p3",nome:"Biotônico Fontoura",preco:18,estoque:5,validade:"2027-03-12"},{id:"p4",nome:"Band-Aid 20un",preco:5.75,estoque:10,validade:"2030-01-01"},{id:"p5",nome:"Clonazepam 0.5mg",preco:45,estoque:8,validade:"2026-12-01"},{id:"p6",nome:"Amoxicilina 500mg",preco:22.3,estoque:6,validade:"2028-07-01"},{id:"p7",nome:"Dipirona Sódica 1g",preco:9.5,estoque:12,validade:"2027-11-01"},{id:"p8",nome:"Paracetamol 750mg",preco:11.2,estoque:15,validade:"2026-03-15"},{id:"p9",nome:"Ibuprofeno 600mg",preco:17.8,estoque:9,validade:"2028-10-10"},{id:"p10",nome:"Omeprazol 20mg",preco:19.9,estoque:7,validade:"2029-05-20"},{id:"p11",nome:"Loratadina 10mg",preco:13.5,estoque:11,validade:"2026-09-30"},{id:"p12",nome:"Losartana 50mg",preco:16.4,estoque:10,validade:"2028-02-01"},{id:"p13",nome:"Metformina 850mg",preco:22.1,estoque:6,validade:"2027-04-10"},{id:"p14",nome:"Sinvastatina 20mg",preco:20.75,estoque:8,validade:"2029-07-01"},{id:"p15",nome:"Ácido Acetilsalicílico 100mg",preco:8.9,estoque:14,validade:"2027-08-15"},{id:"p16",nome:"Dipirona Infantil",preco:10.5,estoque:5,validade:"2025-12-01"}];let r=[];const l=document.getElementById("produtos"),g=document.getElementById("btnBuscar"),E=document.getElementById("search"),m=document.getElementById("btnCarrinho"),p=document.getElementById("carrinho"),q=document.getElementById("fecharCarrinho"),f=document.getElementById("total"),C=document.getElementById("finalizar");document.getElementById("fecharCarrinho");const u=document.getElementById("itensCarrinho");v(d);function v(t){l.innerHTML="",t.forEach(e=>{const n=document.createElement("div");n.className="produto",n.innerHTML=`
      <h3>${e.nome}</h3>
      <p>R$ ${e.preco.toFixed(2)}</p>
      <p>Estoque: ${e.estoque}</p>
      <p>Validade: ${e.validade}</p>  <!-- Mostra a validade -->
      <button data-id="${e.id}">Adicionar</button>
    `,l.appendChild(n)}),document.querySelectorAll(".produto button").forEach(e=>{e.addEventListener("click",()=>y(e.dataset.id))})}g.addEventListener("click",()=>{const t=E.value,e=d.filter(n=>n.nome.includes(t));v(e)});function y(t){const e=d.find(i=>i.id===t);if(!e)return;const n=r.find(i=>i.id===t);if(n)n.qtd++;else{const i=L(e.nome);r.push({id:e.id,nome:e.nome,preco:e.preco,qtd:1,precisaReceita:i,receita:""})}s()}function L(t){const e=t.toLowerCase();return e.includes("clonazepam")||e.includes("amoxicilina")||e.includes("biotônico")}function h(){let t=0;return r.forEach(e=>t+=e.preco*e.qtd),Math.floor(t*100)/100}function s(){m.textContent=`Carrinho (${r.length})`,f.textContent=h().toFixed(2),B()}function B(){u.innerHTML="",r.forEach(t=>{const e=d.find(a=>a.id===t.id),n=e?e.validade:"",i=document.createElement("li"),o=t.precisaReceita?`<div class="receita">
           <label>Este medicamento carece de prescrição médica, apenas será vendido mediante apresentação do número do receituário: <input data-id="${t.id}" class="input-receita" value="${t.receita}" placeholder="Nº receita"></label>
         </div>`:"";i.innerHTML=`
      ${t.nome} - ${t.qtd} x R$ ${t.preco.toFixed(2)} 
      <span style="color:red;">(Validade: ${n})</span>
      <button data-id="${t.id}" class="rem">Remover</button>
      ${o}
    `,u.appendChild(i)}),document.querySelectorAll("#itensCarrinho .rem").forEach(t=>{t.addEventListener("click",()=>$(t.dataset.id))}),document.querySelectorAll(".input-receita").forEach(t=>{t.addEventListener("input",e=>{const n=e.target.dataset.id,i=r.find(o=>o.id===n);i&&(i.receita=e.target.value)})}),f.textContent=h().toFixed(2)}function $(t){const e=r.findIndex(n=>n.id===t);e>=0&&r.splice(e,1),s()}C.addEventListener("click",()=>{console.log("Compra finalizada com sucesso! (Carrinho não é limpo)"),s();const t=document.getElementById("msgFinalizar");t&&(t.textContent="Compra realizada!")});m.addEventListener("click",()=>{p.classList.add("ativo")});q.addEventListener("click",()=>{p.classList.remove("ativo")});
